(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["serial-base"],{"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},9091:function(e,t,n){"use strict";n.r(t),function(e){var r=n("5530"),i=n("53ca"),a=n("1da1"),u=n("3835"),c=n("d4ec"),s=n("bee2"),o=n("262e"),l=n("2caf"),p=(n("96cf"),n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4de4"),n("159b"),n("b64b"),n("25f0"),n("b0c0"),n("7db0"),n("fb6a"),n("faa1")),v=n.n(p),f=n("4360"),h={dtr:"dataTerminalReady",rts:"requestToSend",brk:"break",cts:"clearToSend",dsr:"dataSetReady",dcd:"dataCarrierDetect"},d=function(t){Object(o["a"])(p,t);var n=Object(l["a"])(p);function p(){var e;return Object(c["a"])(this,p),e=n.call(this),e.requestRequired=!1,e.mute=!1,e.baud=Number(window.localStorage.currentBaudRate)||115200,e.lastBaud=115200,e.devices=[],e.currentDevice=null,e.connected=!1,e.implementation="basic",e.serial=null,e.DEBUG=!!Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_DEBUG,e}return Object(s["a"])(p,[{key:"encoding",get:function(){var e,t=Object(u["a"])(f["a"].getters["settings/find"]({query:{key:"monitor"}}).data,1),n=t[0];return(null===n||void 0===n||null===(e=n.value)||void 0===e?void 0:e.encoding)||"ascii"}},{key:"install",value:function(e){e.$serial=this,e.prototype.$serial=this}},{key:"requestDevice",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"listDevices",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.devices.map((function(e){return n.isDevice(e.value)})));case 2:return t=e.sent,e.abrupt("return",this.devices.filter((function(e,n){return t[n]})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isDevice",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setCurrentDevice",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentDevice=t;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setBaud",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.DEBUG&&console.log("setting speed",t),!this.serial){e.next=4;break}return e.next=4,this.serial.update({baudRate:t});case 4:return this.baud=t,window.localStorage.currentBaudRate=t,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetBaud",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.setBaud(this.lastBaud);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setMute",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.mute=t;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_transSignal",value:function(e){var t={};return"object"===Object(i["a"])(e)&&(t=Object(r["a"])({},e)),"on"!==e&&!0!==e||(t={dtr:!0,rts:!0}),"off"!==e&&!1!==e||(t={dtr:!1,rts:!1}),Object.keys(h).forEach((function(e){"boolean"===typeof t[e]&&(t[h[e]]=t[e]),"boolean"===typeof t[h[e]]&&(t[e]=t[h[e]])})),t}},{key:"setSignals",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(n=this.serial)&&void 0!==n&&n.isOpen){e.next=2;break}throw new Error("Cannot write to closed port.");case 2:return this.DEBUG&&console.log("signaling",t),r=this._transSignal(t),e.abrupt("return",this.serial.set(r));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSignals",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(t=this.serial)&&void 0!==t&&t.isOpen){e.next=2;break}throw new Error("Cannot read closed port.");case 2:return e.next=4,this.serial.get();case 4:return n=e.sent,e.abrupt("return",this._transSignal(n));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readBuff",value:function(){var e=this;return new Promise((function(t,n){var r;return null===(r=e.serial)||void 0===r?void 0:r.read((function(e,r){r?n(r):t()}))}))}},{key:"writeBuff",value:function(e){var t=this;return this.DEBUG&&console.log("write",e.toString("hex")),new Promise((function(n,r){return t.serial.write(e,(function(e){e?r(e):n()}))}))}},{key:"connect",value:function(){var e=this;if(!this.serial)throw new Error("Cannot connect to un-initiated device.");return!this._currentDevice||this.serial.isOpen?(this.DEBUG&&console.log("skipping connect"),Promise.resolve()):new Promise((function(t,n){return e.serial.open((function(r){return r?n(r):(e.connected=!0,e.emit("connected",e.currentDevice),t())}))}))}},{key:"disconnect",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._currentDevice&&null!==(t=this.serial)&&void 0!==t&&t.isOpen){e.next=2;break}return e.abrupt("return");case 2:return this.serial.pause(),e.next=5,this.serial.close();case 5:this.serial.resume(),this.connected=!1,this.emit("disconnect",this.currentDevice),this.emit("close"),this.DEBUG&&console.log("disconnected");case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDeviceName",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.isDevice(t);case 2:if(!e.sent){e.next=4;break}this.devices.push({value:t,name:n});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getDeviceName",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.devices.find((function(e){return e.value===t}))||{name:""}).name);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isOpen",get:function(){return this.connected}},{key:"path",get:function(){return this.implementation}},{key:"baudRate",get:function(){return this.baud}},{key:"open",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:function(){},e.prev=1,e.next=4,this.connect();case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](1),null===t||void 0===t||t(e.t0),e.abrupt("return");case 10:null===t||void 0===t||t();case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:function(){},e.prev=2,!t.baudRate){e.next=6;break}return e.next=6,this.setBaud(t.baudRate);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](2),null===n||void 0===n||n(e.t0),e.abrupt("return");case 12:null===n||void 0===n||n();case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:function(){},e.prev=1,e.next=4,this.disconnect();case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](1),null===t||void 0===t||t(e.t0),e.abrupt("return");case 10:null===t||void 0===t||t();case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"set",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:function(){},e.prev=2,e.next=5,this.setSignals(t);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),null===n||void 0===n||n(e.t0),e.abrupt("return");case 11:null===n||void 0===n||n();case 12:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"get",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:function(){},n={},e.prev=2,e.next=5,this.getSignals();case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](2),null===t||void 0===t||t(e.t0,null),e.abrupt("return");case 12:null===t||void 0===t||t(null,n);case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.readBuff();case 2:return n=e.sent,e.abrupt("return",n&&n.slice(0,Math.min(n.length,t||1/0)));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"drain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};null===e||void 0===e||e()}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};null===e||void 0===e||e()}},{key:"pause",value:function(){var e,t;null===(e=this.serial)||void 0===e||null===(t=e.paused)||void 0===t||t.call(e)}},{key:"resume",value:function(){var e,t;null===(e=this.serial)||void 0===e||null===(t=e.resume)||void 0===t||t.call(e)}},{key:"write",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,i,a,u,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=c.length>1&&void 0!==c[1]?c[1]:null,a=c.length>2&&void 0!==c[2]?c[2]:function(){},"function"===typeof i&&(a=i,i=null),!this.mute||"string"!==typeof n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,this.writeBuff("string"===typeof n?e.from(n,i||this.encoding):n);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t["catch"](5),null===(u=a)||void 0===u||u(t.t0),t.abrupt("return");case 14:null===(r=a)||void 0===r||r();case 15:case"end":return t.stop()}}),t,this,[[5,10]])})));function n(e){return t.apply(this,arguments)}return n}()}]),p}(v.a);t["default"]=d}.call(this,n("b639").Buffer)}}]);
//# sourceMappingURL=serial-base.4a4fda7b.js.map